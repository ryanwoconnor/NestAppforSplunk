[nest_devices]
KV_MODE = none
EXTRACT-smoke_co_alarms_data=devices.*?smoke_co_alarms\":(?<smoke_co_alarms_data>.*?})}
EXTRACT-thermostats_data=devices.*?thermostats\":(?<thermostats_data>.*?})}
EXTRACT-name = .*name\":\"(?<name>.*?)\",\"country
EXTRACT-away =  away\":\"(?<away>.*?)\"
REPORT-thermostats_name_long=thermostats_name_long
REPORT-smoke_co_alarms_name_long=smoke_co_alarms_name_long
REPORT-battery_health = battery_health
REPORT-has_leaf =  has_leaf
REPORT-last_manual_test_time = last_manual_test_time
REPORT-ambient_temperature_f = ambient_temperature_f
REPORT-target_temperature_f =  target_temperature_f
REPORT-target_temperature_low_f =  target_temperature_low_f
REPORT-target_temperature_high_f =  target_temperature_high_f
REPORT-hvac_mode= hvac_mode
REPORT-smoke_alarm_state = smoke_alarm_state
REPORT-humidity = humidity
EXTRACT-smoke_co_alarms_id = smoke_co_alarms\":\[\"(?<smoke_co_alarms_id>.*?)\"\]
EXTRACT-structure_id = structure_id\":\"(?<structure_id>.*?)\"
EXTRACT-thermostats_id = thermostats\":\[\"(?<thermostats_id>.*?)\"\]
EVAL-smoke_co_alarms_id = split(smoke_co_alarms_id,"\",\"")
EVAL-thermostats_id = split(thermostats_id, "\",\"")
LOOKUP-nest_z_HomeViewCityLookup = home_view_city name AS name OUTPUTNEW city AS city
